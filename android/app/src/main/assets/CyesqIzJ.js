import{e as k,a8 as T,l as x,r as B,aA as le,b as l,E as A,ap as p,ay as re,f as F,S as ce,P as G,aE as ie,ai as _,aj as W,aF as ue,q as de,a7 as V,aG as Y,a9 as I,a4 as Q,n as X,aH as H,at as me,aI as fe,aJ as ge,al as Be,ao as Z,aq as ee,ar as te,aK as ve,aL as U,G as he,i as M,w as K,k as pe,g as J,o as O,c as be,F as ye,h as we,j as Ce,aM as Se}from"./CxRIJn2k.js";/* empty css        */import{B as $}from"./CN4QI_hp.js";/* empty css        *//* empty css        *//* empty css        */import{L as ke}from"./SeH0vPKR.js";import _e from"./BYvpH4xV.js";import{u as Oe}from"./CWdTFuqg.js";import{u as Pe}from"./CGhLo2dv.js";import{u as Te}from"./SBAK3biZ.js";import{u as xe,r as Ae}from"./XYHIRF0I.js";import{a as Ee,T as Ne}from"./DZK1N2Ln.js";const[ne,z]=x("action-bar"),oe=Symbol(ne),De={placeholder:Boolean,safeAreaInsetBottom:T};var Le=k({name:ne,props:De,setup(e,{slots:o}){const n=B(),r=Te(n,z),{linkChildren:s}=le(oe);s();const u=()=>{var f;return l("div",{ref:n,class:[z(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(f=o.default)==null?void 0:f.call(o)])};return()=>e.placeholder?r(u):u()}});const Me=A(Le),[Ie,$e]=x("action-bar-button"),Re=p({},Ae,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Fe=k({name:Ie,props:Re,setup(e,{slots:o}){const n=xe(),{parent:r,index:s}=re(oe),u=F(()=>{if(r){const c=r.children[s.value-1];return!(c&&"isButton"in c)}}),f=F(()=>{if(r){const c=r.children[s.value+1];return!(c&&"isButton"in c)}});return ce({isButton:!0}),()=>{const{type:c,icon:v,text:h,color:S,loading:b,disabled:y}=e;return l($,{class:$e([c,{last:f.value,first:u.value}]),size:"large",type:c,icon:v,color:S,loading:b,disabled:y,onClick:n},{default:()=>[o.default?o.default():h]})}}});const j=A(Fe),[He,d,P]=x("dialog"),Ue=p({},Y,{title:String,theme:String,width:X,message:[String,Function],callback:Function,allowHtml:Boolean,className:Q,transition:I("van-dialog-bounce"),messageAlign:String,closeOnPopstate:T,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:T,closeOnClickOverlay:Boolean,keyboardEnabled:T,destroyOnClose:Boolean}),Ke=[...ue,"transition","closeOnPopstate","destroyOnClose"];var ae=k({name:He,props:Ue,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:o,slots:n}){const r=B(),s=G({confirm:!1,cancel:!1}),u=t=>o("update:show",t),f=t=>{var a;u(!1),(a=e.callback)==null||a.call(e,t)},c=t=>()=>{e.show&&(o(t),e.beforeClose?(s[t]=!0,Be(e.beforeClose,{args:[t],done(){f(t),s[t]=!1},canceled(){s[t]=!1}})):f(t))},v=c("cancel"),h=c("confirm"),S=ie(t=>{var a,m;if(!e.keyboardEnabled||t.target!==((m=(a=r.value)==null?void 0:a.popupRef)==null?void 0:m.value))return;({Enter:e.showConfirmButton?h:H,Escape:e.showCancelButton?v:H})[t.key](),o("keydown",t)},["enter","esc"]),b=()=>{const t=n.title?n.title():e.title;if(t)return l("div",{class:d("header",{isolated:!e.message&&!n.default})},[t])},y=t=>{const{message:a,allowHtml:m,messageAlign:i}=e,w=d("message",{"has-title":t,[i]:i}),L=me(a)?a():a;return m&&typeof L=="string"?l("div",{class:w,innerHTML:L},null):l("div",{class:w},[L])},E=()=>{if(n.default)return l("div",{class:d("content")},[n.default()]);const{title:t,message:a,allowHtml:m}=e;if(a){const i=!!(t||n.title);return l("div",{key:m?1:0,class:d("content",{isolated:!i})},[y(i)])}},N=()=>l("div",{class:[ge,d("footer")]},[e.showCancelButton&&l($,{size:"large",text:e.cancelButtonText||P("cancel"),class:d("cancel"),style:{color:e.cancelButtonColor},loading:s.cancel,disabled:e.cancelButtonDisabled,onClick:v},null),e.showConfirmButton&&l($,{size:"large",text:e.confirmButtonText||P("confirm"),class:[d("confirm"),{[fe]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:s.confirm,disabled:e.confirmButtonDisabled,onClick:h},null)]),D=()=>l(Me,{class:d("footer")},{default:()=>[e.showCancelButton&&l(j,{type:"warning",text:e.cancelButtonText||P("cancel"),class:d("cancel"),color:e.cancelButtonColor,loading:s.cancel,disabled:e.cancelButtonDisabled,onClick:v},null),e.showConfirmButton&&l(j,{type:"danger",text:e.confirmButtonText||P("confirm"),class:d("confirm"),color:e.confirmButtonColor,loading:s.confirm,disabled:e.confirmButtonDisabled,onClick:h},null)]}),g=()=>n.footer?n.footer():e.theme==="round-button"?D():N();return()=>{const{width:t,title:a,theme:m,message:i,className:w}=e;return l(V,_({ref:r,role:"dialog",class:[d([m]),w],style:{width:de(t)},tabindex:0,"aria-labelledby":a||i,onKeydown:S,"onUpdate:show":u},W(e,Ke)),{default:()=>[b(),E(),g()]})}}});let R;const Je={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,destroyOnClose:!1};let ze=p({},Je);function je(){({instance:R}=ee({setup(){const{state:o,toggle:n}=te();return()=>l(ae,_(o,{"onUpdate:show":n}),null)}}))}function qe(e){return Z?new Promise((o,n)=>{R||je(),R.open(p({},ze,e,{callback:r=>{(r==="confirm"?o:n)(r)}}))}):Promise.resolve(void 0)}const Ge=e=>qe(p({showCancelButton:!0},e));A(ae);const[We,Ve]=x("notify"),Ye=["lockScroll","position","show","teleport","zIndex"],Qe=p({},Y,{type:I("danger"),color:String,message:X,position:I("top"),className:Q,background:String,lockScroll:Boolean});var se=k({name:We,props:Qe,emits:["update:show"],setup(e,{emit:o,slots:n}){const r=s=>o("update:show",s);return()=>l(V,_({class:[Ve([e.type]),e.className],style:{color:e.color,background:e.background},overlay:!1,duration:.2,"onUpdate:show":r},W(e,Ye)),{default:()=>[n.default?n.default():e.message]})}});let q,C;const Xe=e=>ve(e)?e:{message:e};function Ze(){({instance:C}=ee({setup(){const{state:e,toggle:o}=te();return()=>l(se,_(e,{"onUpdate:show":o}),null)}}))}const et=()=>({type:"danger",color:void 0,message:"",onClose:void 0,onClick:void 0,onOpened:void 0,duration:3e3,position:void 0,className:"",lockScroll:!1,background:void 0});let tt=et();const nt=()=>{C&&C.toggle(!1)};function ot(e){if(Z)return C||Ze(),e=p({},tt,Xe(e)),C.open(e),clearTimeout(q),e.duration>0&&(q=setTimeout(nt,e.duration)),C}A(se);const ht=k({__name:"ListJuniorMode",emits:["remove-all","handle-play","handle-save-set"],setup(e,{emit:o}){const n=o,r=Oe(),s=Pe(),u=B("Menu.build_new_set"),f=B(""),c=B([]),v=B([]),h=B(0),S=B(""),b=G([{name:"Menu.build_new_set",comp:U(ke),props:{musicListsLocal:c},events:{submit:g=>E()}},{name:"Menu.load_set",comp:U(_e)},{name:"Menu.remove_all",comp:null,action:()=>{Ge({title:"警告",message:"確定要移除全部？"}).then(()=>{N()}).catch(()=>console.log("cancel"))}}]);he(()=>{y()});const y=()=>{v.value=[],h.value=0,c.value&&Array.isArray(c.value)&&(c.value=s.subMusicUpdated.map(g=>{const t={...g};return t.menu&&Array.isArray(t.menu)&&(t.menu=t.menu.map(a=>({...a,checked:!1,order:0}))),t})),s.newSet={name:"",type:"custom",mode:"",chakra:{},content:[]}},E=g=>{if(S.value===""){ot({message:"message.please_select_a_music_situation"});return}const t=JSON.parse(JSON.stringify(s.newSet));n("handle-play",t),n("handle-save-set",t),r.step=0,f.value="",y()},N=()=>{n("remove-all")},D=g=>{const t=b.find(a=>a.name===g);return t&&t.action?(t.action(),!1):!0};return(g,t)=>{const a=Ne,m=Ee;return O(),M(m,{class:"custom-tab",active:J(u),"onUpdate:active":t[0]||(t[0]=i=>pe(u)?u.value=i:null),sticky:"",type:"card","before-change":D},{default:K(()=>[(O(!0),be(ye,null,we(J(b),(i,w)=>(O(),M(a,{key:w,title:g.$t(i.name),name:i.name},{default:K(()=>[(O(),M(Ce(i.comp),_({ref_for:!0},i.props,Se(i.events||{})),null,16))]),_:2},1032,["title","name"]))),128))]),_:1},8,["active"])}}});export{ht as _};
