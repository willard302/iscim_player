import{u as f}from"./CWdTFuqg.js";import{a as p,u as k}from"./CGhLo2dv.js";import{u as x}from"./8oP2vdyN.js";const P=()=>{const t=p(),r=k(),i=f(),u=x(),d=e=>{r.queue.push(e),t.index===-1&&(u?.setSourceByIndex(0),u?.playMusic())},m=(e,n)=>{const a={id:e.id,name:e.name,src:e.src,index:t.index,chakra:n?n.num===99?n:n.num:r.chakra.num||0};d(a),r.name==="Hints.select_music"&&(r.name=a.name,t.src=a.src)};return{addToLists:d,addMusic:m,addChakra:e=>{r.chakra.name=e.name,r.chakra.num=e.idx,i.openMenu="off"},loadSongSets:(e,n=[])=>{const{idx:a,num:h}=r.chakra;let s=a;const o=h===99?n.length?n:e.chakra||[]:[],S=()=>{if(o.length===0)return 0;const c=o[s];return s=(s+1)%o.length,c};e.content.forEach(c=>{const l=S();m(c,l)})},saveSet:e=>{r.initNewSet(),r.name=e,r.queue.forEach(n=>{r.newSet.content.push({name:n.name,id:n.name,src:n.src}),n.chakra&&r.newSet.chakra.push(n.chakra)}),r.subSet.find(n=>n.name==="Set.custom").menu.push(r.newSet)},removeSet:e=>{r.subSet.find(n=>n.name===e.name).menu.splice(e.index,1)},removeMusic:(e,n)=>{e.order>n.order?e.order--:e.order===n.order&&(e.order=null)}}};export{P as u};
