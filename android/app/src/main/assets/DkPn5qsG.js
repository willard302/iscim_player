import{_ as I}from"./aHjHZ_zr.js";import{_ as F}from"./DJ3zHUFl.js";import{e as V,L as W,f as z,G as J,c as m,i as f,M as K,N as p,b as l,g as n,O as d,a as x,w as C,F as k,h as v,H as P,o as i,_ as Q}from"./CxRIJn2k.js";import{D as X}from"./SeH0vPKR.js";import{L as Y,M as $}from"./D_N6av2o.js";/* empty css        */import{C as Z}from"./Be22cbFi.js";import{_ as ee}from"./CyesqIzJ.js";import{u as ne}from"./CWdTFuqg.js";import{u as te,a as se}from"./CGhLo2dv.js";import{u as oe}from"./C-uWY-DC.js";import{u as ie}from"./8oP2vdyN.js";/* empty css        *//* empty css        */import"./Cof-mslr.js";import"./D6Uxx242.js";import"./CqK17z4Q.js";import"./Dvk4rGQz.js";import"./CN4QI_hp.js";import"./XYHIRF0I.js";/* empty css        *//* empty css        */import"./Cy3cWCk7.js";import"./DZK1N2Ln.js";import"./IOLQkN_j.js";import"./DNgW3PBO.js";import"./BYvpH4xV.js";import"./SBAK3biZ.js";import"./z2VIuxhO.js";const ae={class:"list__container checkout"},ue={class:"list__container menu"},re=V({__name:"musicList",setup(ce){const{addMusic:g,saveSet:j,removeSet:E,loadSongSets:L,addChakra:N}=oe(),y=ie(),R=W(),s=te(),u=se(),a=ne(),q=R.userInfo,G=[{name:"Chakra.Balance",idx:0,id:"Balance"},{name:"Chakra.Overall",idx:99,id:"OverAll"},{name:"Chakra.Root",idx:1,id:"Root"},{name:"Chakra.Sacral",idx:2,id:"Sacral"},{name:"Chakra.Navel",idx:3,id:"Navel"},{name:"Chakra.Waist",idx:4,id:"Waist"},{name:"Chakra.Solar_Plexus",idx:5,id:"Solar Plexus"},{name:"Chakra.Heart",idx:6,id:"Heart"},{name:"Chakra.Pineal",idx:7,id:"Pineal"},{name:"Chakra.Third_Eye",idx:8,id:"Third Eye"},{name:"Chakra.Crown",idx:9,id:"Crown"}],A=z(()=>{const e={name:s.chakra.name,id:"chakra"},_={name:"Menu.set",id:"set"},M={name:"Menu.music",id:"music"};return q?[e,_,M,{name:"Menu.custom_music",id:"mymusic"}]:[_,M]}),B=()=>s.type==="pro"?["/music_default/menu.json","/music_set/default_pro.json","/music_set/default_fiveElements.json","/music_set/custom_new.json","/music_custom/menu.json"]:["/music_default/menu.json","/music_set/default_pub.json","/music_set/default_fiveElements.json"],H=e=>{s.type==="pro"?(s.subSet=[{name:"Set.numbers",menu:e[1]},{name:"Set.five_elements",menu:e[2]},{name:"Set.custom",menu:e[3]}],s.subMusicUpdated=[{name:"Menu.numbers_music",menu:s.composeMusic(e[4],"Numbers")},{name:"Menu.five_elements_music",menu:s.composeMusic(e[4],"Five_Elements")}]):s.subSet=[{name:"Set.numbers",menu:e[1]},{name:"Set.fiveElements",menu:e[2]}]},O=async()=>{const e=B();try{const _=e.map(async c=>{const r=await fetch(c);if(!r.ok)throw new Error(`HTTP ERROR! Status: ${r.status}, URL: ${c}`);const S=r.headers.get("content-type");if(S&&S.indexOf("application/json")===-1){const b=await r.text();console.error(`錯誤:預期是JSON但收到HTML，請檢查路徑${c}`),console.error(`回傳內容預覽：${b.substring(0,50)}`)}return r.json()}),M=await Promise.all(_);s.subMusic=[{name:"Music.fast",menu:s.composeMusic(M[0],"Fast")},{name:"Music.medium",menu:s.composeMusic(M[0],"Medium")},{name:"Music.slow",menu:s.composeMusic(M[0],"Slow")}],H(M)}catch(_){console.error("Error fetching APIs: ",_)}},T=e=>{u.isPlaying?u.index===e?y.pauseMusic():(y.pauseMusic(),u.index=e,y.playIndex(e)):(u.index=e,y.playIndex(e))},U=e=>{if(s.queue.length<=1){y.pauseMusic(),s.queue.splice(e,1),u.index=-1,u.src="",s.name="Hints.select_music";return}if(e>u.index)return s.queue.splice(e,1);y.pauseMusic(),e<u.index?(u.index--,s.queue.splice(e,1)):e===u.index&&(s.queue.splice(e,1),u.index=u.index!==0?u.index-1:0),y.playMusic()},w=()=>{y.pauseMusic(),D()},D=()=>{s.resetMusic(),u.resetPlayer()};return J(async()=>{await O()}),(e,_)=>{const M=I,c=Z,r=Y,S=X,b=F;return i(),m("div",{class:P([{openNav:n(a).openMenu!=="off"}])},[n(a).openMenu==="juniorMenu"?(i(),f(ee,{key:0,onRemoveAll:w})):K("",!0),p(x("div",ae,[l(r,null,{default:C(()=>[(i(!0),m(k,null,v(n(s).queue,(t,o)=>(i(),f(c,{key:o,class:P([{playing:n(u).index==o}]),center:"",id:t.id,title:t.name,value:t.chakra,onClick:h=>T(o)},{"right-icon":C(()=>[l(M,{icon:"trash",onClick:h=>U(o)},null,8,["onClick"])]),_:2},1032,["class","id","title","value","onClick"]))),128))]),_:1})],512),[[d,n(a).openMenu==="off"]]),p(x("div",ue,[p(l(r,null,{default:C(()=>[(i(!0),m(k,null,v(n(A),(t,o)=>(i(),f(c,{key:o,title:e.$t(t.name),onClick:h=>n(a).toggleMenu(t.id)},null,8,["title","onClick"]))),128)),l(c,{title:e.$t("clean_all"),onClick:_[0]||(_[0]=t=>w())},null,8,["title"])]),_:1},512),[[d,n(a).openMenu==="navMenu"]]),p(l(r,null,{default:C(()=>[(i(!0),m(k,null,v(n(s).subMusic,(t,o)=>(i(),f(c,{key:o,title:e.$t(t.name),onClick:h=>n(a).toggleMenu(t.name)},null,8,["title","onClick"]))),128))]),_:1},512),[[d,n(a).openMenu==="music"]]),p(l(r,null,{default:C(()=>[(i(!0),m(k,null,v(n(s).subMusicUpdated,(t,o)=>(i(),f(c,{key:o,title:e.$t(t.name),onClick:h=>n(a).toggleMenu(t.name)},null,8,["title","onClick"]))),128))]),_:1},512),[[d,n(a).openMenu==="mymusic"]]),p(l(r,null,{default:C(()=>[(i(!0),m(k,null,v(n(s).subSet,(t,o)=>(i(),f(c,{key:o,title:e.$t(t.name),onClick:h=>n(a).toggleMenu(t.name)},null,8,["title","onClick"]))),128))]),_:1},512),[[d,n(a).openMenu==="set"]]),p(l(r,null,{default:C(()=>[(i(),m(k,null,v(G,(t,o)=>l(c,{key:o,title:e.$t(t.name),onClick:h=>n(N)(t)},null,8,["title","onClick"])),64))]),_:1},512),[[d,n(a).openMenu==="chakra"]]),(i(!0),m(k,null,v(n(s).subMusic,(t,o)=>p((i(),f($,{key:o,list:t,onGetMusic:n(g)},null,8,["list","onGetMusic"])),[[d,n(a).openMenu===t.name]])),128)),(i(!0),m(k,null,v(n(s).subMusicUpdated,(t,o)=>p((i(),f($,{key:o,list:t,onGetMusic:n(g)},null,8,["list","onGetMusic"])),[[d,n(a).openMenu===t.name]])),128)),(i(!0),m(k,null,v(n(s).subSet,(t,o)=>p((i(),f($,{key:o,list:t,onGetMusic:n(L),onSaveMusic:n(j),onRemoveMusic:n(E)},null,8,["list","onGetMusic","onSaveMusic","onRemoveMusic"])),[[d,n(a).openMenu===t.name]])),128))],512),[[d,n(a).openMenu!=="off"]]),l(S),l(b)],2)}}}),Oe=Q(re,[["__scopeId","data-v-514ec9c7"]]);export{Oe as default};
